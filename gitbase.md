## Первоначальная настройка Git для Windows

### 1. Введение.  
Теперь, когда Git установлен на вашей системе, вы захотите сделать пару вещей, чтобы настроить вашу среду Git. 
Это нужно сделать только один раз ― при обновлении настройки сохраняются. Но вы можете их поменять в любой момент, 
выполнив команды снова.  

В состав Git входит утилита git config, которая позволяет вам просматривать и устанавливать параметры, 
контролирующие все аспекты работы и внешнего вида Git. Эти параметры могут быть сохранены в трёх местах:  

- Файл /etc/gitconfig содержит значения, общие для всех пользователей вашей системы и всех их репозиториев. 
Если вы указываете параметр --system, запуская git config, то параметры читаются и сохраняются в этот файл.  
- Файл ~/.gitconfig хранит настройки конкретного пользователя. Этот файл используется при указании параметра --global.
- Конфигурационный файл в каталоге Git (.git/config) в том репозитории, где вы находитесь в данный момент.  
Эти параметры ― только для данного конкретного репозитория. Настройки на каждом уровне подменяют настройки 
из предыдущего, то есть значения в .git/config перекрывают соответствующие значения в /etc/gitconfig.  

В системах семейства Windows Git ищет файл .gitconfig в каталоге $HOME (C:\Documents and Settings\$USER 
для большинства пользователей). Кроме того Git ищет файл /etc/gitconfig, но уже относительно корневого 
каталога Git (Как правило, C:\Program Files\Git\), который находится там, куда вы решили установить Git, когда запускали инсталлятор.

Все указанные ниже настройки можно выполнить используя командный процессор cmd.exe. Для того чтобы командный процессор находил 
необходимые команды в переменной среды PATH должны быть указаны следующие пути:  

    C:\Program Files\Git\cmd  
    C:\Program Files\Git\mingw64\bin  
    C:\Program Files\Git\usr\bin  

Как правило Вам незачем беспокоится об этих путях, они прописываются в настройки вашего компьютера инсталляторам Git.  



### 2. Настройки Git перед первым использованием.  
Первое, что вам следует сделать после установки Git, ― указать ваше имя и адрес электронной почты. 
Это важно, потому что каждый коммит в Git содержит эту информацию, и она включена в коммиты, 
передаваемые вами, и не может быть далее изменена:  

    $ git config --global user.name "Dmitry Shelepnev"  
    $ git config --global user.email shelepnevdv@vtg.gazprom.ru  


Эти настройки нужно сделать один раз, если вы указываете параметр --global, поскольку в этом случае 
Git будет использовать эти данные для всего, что вы делаете в этой системе. Если вы хотите указать 
другое имя или электронную почту для конкретных проектов, можно выполнить команду без параметра --global 
в каталоге с нужным проектом.  

Также в новой версии Git необходимо указать поведение команды push по умолчанию. Для начала нам подойдет
следующая настройка:

    $ git config --global push.default simple

Эта настройка при выполнении команды git push на сервер будет оправлять только одну ветвь проекта (текущую или указанную вами). 
Использование "matching" позволяет отправлять в центральный репозиторий сразу несколько ветвей, этот способ также не очень
подходит при использовании центрального общего сервера, такого как GitLab, и с репозиториями с которыми возможно работатьь вы будете не одни.  
   
   
Если вы хотите проверить используемые настройки, можете использовать команду git config --list, чтобы 
показать все, которые Git найдёт:  

    $ git config --list
    user.name=Dmitry Shelepnev
    user.email=shelepnevdv@vtg.gazprom.ru
    color.status=auto
    color.branch=auto
    color.interactive=auto
    color.diff=auto
    ...

Некоторые ключи (названия) настроек могут появиться несколько раз, потому что Git читает один и тот же 
ключ из разных файлов (например из /etc/gitconfig и ~/.gitconfig). В этом случае Git использует последнее 
значение для каждого ключа.  


### 3. Настройка языковых параметров.
По умолчанию консоль Windows не поддерживает Unicode. Необходимо изменить шрифт для консоли на unicode-шрифт, 
например Lucida Console. Программа установки Git делает это автоматически, но только для одного пользователя, 
от имени которого производится установка.  

По умолчанию Git печатает не-ASCII имена файлов в восьмеричной нотации (например \nnn\nnn\...). Можно исправить 
это, выполнив команду:  

    git config --global core.quotepath off  

Предидущие не-Unicode версии Git для Windows требовали установки для параметра i18n.logoutputencoding 
значения, совпадающего с системной OEM кодировкой Windows для корректного отображение не-ASCII описаний 
коммитов. Теперь этого не требуется. Удалите эту настройку следующей командой или установите кодировку 
"utf-8":  

    git config --global --unset i18n.logoutputencoding

Следующей командой также необходимо удалить настройку кодировки или установить ее в "utf-8" для поддержки 
корректного восприятия описаний коммитов, введенной в командной строке (git commit -m "..." из cmd.exe,
Git BASH не позволит вам ввести не-ASCII символы в любом случае):

    git config --global --unset i18n.commitencoding

Следующая команда заменяет немного некорректно работающую с кириллицей утилиту less на утилиту cat:  

    git config --global core.pager cat

Ну, а для тех кто не может работать с Unix'like редактором VI можно установить редактор Notepad++ для ввода 
описаний коммитов:

    git config --global core.editor "'C:/Program Files (x86)/Notepad++/notepad++.exe' -multiInst -notabbar -nosession -noPlugin"  

Конечно, же [Notepad++](/help/gtnn/download.md) должен находится по указанному пути.  


### 4. Замена LF на CRLF

Бывает что при использовании проектов с Unix-Like файлами (например, при использование IDE для кроссплатформенных 
языков, например: PyCharm, или использование unix-репозиториев в Windows) возникает следующая ошибка преобразования 
CR в CRLF:   

    fatal: LF would be replaced by CRLF in ...

Самое простое, для ее исправления можно отключить проверку формата следующими командами:   

    git config --global core.autocrlf false
    git config --global core.safecrlf false


### 5. Генерация SSH-ключей  

Ключи SSH позволяют устанавливать защищенные соединения между Вашим компьютером и GitLab.  
Перед тем как начинать генерировать новые ключи необходимо проверить, возможно ключи уже были 
сгенерированы для Вашей системы.  
Для ОС Windows необходимо проверить содержимое каталога %USERPROFILE%\.ssh командой:

    > dir %USERPROFILE%\.ssh  

Если такой каталог существует и в нем присутсвуеют файлы id_rsa и id_rsa.pub, то значит пара ключей 
сгенерирована и для возможнсоти установления защищенной связис GitLab можно воспользоваться содержимым 
файла id_rsa.pub.
Если каталог .ssh не существует создадим его командой:

    > mkdir %USERPROFILE%\.ssh

Если указанные файлы не найдены, то их можно сгенерировать командой:   

    > ssh-keygen.exe -t rsa -C "Ваш@e-mail.ru" -f %USERPROFILE%\.ssh\id_rsa

В конечном счете, когда у вас имеется сгенерированая пара файлов id_rsa и id_rsa.pub, можно скопировать 
открытый ключ в Clipboard командой Windows:   

    > clip < %USERPROFILE%\.ssh\id_rsa.pub   

А затем добавить скопированный ключ в список Ваших ключей в Ваш профил GitLab (Profile Settings->SSH Keys->Add SSH Key).  

### 5. Игнорирование файлов.
Часто в проекте могут находится файлы, которые нет необходимости добавлять в репозиторий (например временные 
файлы, некоторые автоматически генерируемые компилятором файлы, лог-файлы и т.д). Такие файлы можно исключить, 
создав в корне проекта текстовый файл .gitignore в который записать маски для исключаемых файлов. Например, 
для проекта Delphi можно создать файл .gitignore со следующим содержимым:  

    *.~*
    *.dcu

При создании файла .gitignore можно руководствоваться следующими правилами:  

    *      - обозначает 0 или более любых символов;  
    [abc]  – какой то один сивол a, b или c;  
    [0-9]  – какая-то одна цифра от 0 до 9;  
    ?      – любой один символ  
    !      – инверсия шаблона;  

Для исключения из участия в системе контроля версий целого каталога, достаточно поставить символ «\» в конце 
имени каталога.  


